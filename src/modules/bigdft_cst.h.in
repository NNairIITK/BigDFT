#ifndef BIGDFT_CST_H
#define BIGDFT_CST_H

/* GLib support. */
@GLIB_TRUE@
#include <glib.h>
#include <glib-object.h>
@GLIB_END_TRUE@
/* No GLib support, use same conventions. */
@GLIB_FALSE@
#include <stdlib.h>
#define TRUE 1
#define FALSE 0
#define gboolean int
#define g_malloc(A) malloc(A)
#define g_malloc0(A) malloc(A)
#define g_free(A)   free(A)
#define gint int
#define guint unsigned int
#define gchar char
#define gpointer void*
#define GQuark int
typedef struct _GArray {gchar *data; guint len;} GArray;
#define GType  int
#define g_array_index(A, T, I) (((T*)(A->data))[I])
GArray* g_array_sized_new(gboolean zero, gboolean nullify, guint ele_size, guint n_ele);
#define g_array_set_size(A, N) A->len = N
#define g_array_unref(A) free(A->data)
#define G_BEGIN_DECLS
#define G_END_DECLS
typedef struct _GObject {guint ref_count;} GObject;
#define G_OBJECT(O) ((GObject*)O)
#define g_object_ref(O) {O->ref_count += 1;}
#define g_object_unref(O) {O->ref_count -= 1;}
#define g_strdup(S) strdup(S)
#define g_strndup(S,N) strndup(S,N)
@GLIB_END_FALSE@

#define BIGDFT_STRING_VERSION "@PACKAGE_VERSION@"
#define BIGDFT_MAJOR_VERSION @BIGDFT_MAJOR_VERSION@
#define BIGDFT_MINOR_VERSION @BIGDFT_MINOR_VERSION@

#define F90_1D_POINTER_SHIFT @F90_1D_POINTER_SHIFT@
#define F90_1D_POINTER_SIZE  @F90_1D_POINTER_SIZE@

#define F90_2D_POINTER_SHIFT @F90_2D_POINTER_SHIFT@
#define F90_2D_POINTER_SIZE  @F90_2D_POINTER_SIZE@

#define F90_3D_POINTER_SHIFT @F90_3D_POINTER_SHIFT@
#define F90_3D_POINTER_SIZE  @F90_3D_POINTER_SIZE@

#define F90_4D_POINTER_SHIFT @F90_4D_POINTER_SHIFT@
#define F90_4D_POINTER_SIZE  @F90_4D_POINTER_SIZE@

#define F90_5D_POINTER_SHIFT @F90_5D_POINTER_SHIFT@
#define F90_5D_POINTER_SIZE  @F90_5D_POINTER_SIZE@

#undef _BIGDFT_BUILD_FULL_BINDINGS_
@BUILD_BINDINGS_START@
#define _BIGDFT_BUILD_FULL_BINDINGS_
@BUILD_BINDINGS_END@

/* Internal types for Fortran datatypes. */
/* Basic types, used for minimal bindings only. */
#define F_TYPE(T) (T.add)
#define F_DEFINE_TYPE(T) typedef void _ ## T;                                  \
 typedef struct {_ ## T *add; char buf[64];} _ ## T ## _pointer;

F_DEFINE_TYPE(dictionary);
F_DEFINE_TYPE(memory_estimation);
F_DEFINE_TYPE(atoms_data);
F_DEFINE_TYPE(atomic_structure);
F_DEFINE_TYPE(symmetry_data);
F_DEFINE_TYPE(input_variables);
F_DEFINE_TYPE(restart_objects);
F_DEFINE_TYPE(run_objects);
F_DEFINE_TYPE(DFT_global_output);
F_DEFINE_TYPE(DFT_PSP_projectors);
F_DEFINE_TYPE(energy_terms);
F_DEFINE_TYPE(run_image);
F_DEFINE_TYPE(NEB_data);
F_DEFINE_TYPE(system_fragment);
/* Advanced types, used for full bindings. */
F_DEFINE_TYPE(communications_arrays);
F_DEFINE_TYPE(coulomb_operator);
F_DEFINE_TYPE(denspot_distribution);
F_DEFINE_TYPE(DFT_local_fields);
F_DEFINE_TYPE(DFT_optimization_loop);
F_DEFINE_TYPE(DFT_wavefunction);
F_DEFINE_TYPE(GPU_pointers);
F_DEFINE_TYPE(grid_dimensions);
F_DEFINE_TYPE(local_zone_descriptors);
F_DEFINE_TYPE(locreg_descriptors);
F_DEFINE_TYPE(nonlocal_psp_descriptors);
F_DEFINE_TYPE(orbitals_data);
F_DEFINE_TYPE(rho_descriptors);
F_DEFINE_TYPE(rholoc_objects);
F_DEFINE_TYPE(wavefunctions_descriptors);
F_DEFINE_TYPE(gaussian_basis);
F_DEFINE_TYPE(cdft_data);

/***************************/
/* Generic pointer arrays. */
/***************************/
typedef struct _f90_pointer_double f90_pointer_double;
struct _f90_pointer_double
{
#if F90_1D_POINTER_SHIFT > 0
  void *shift[F90_1D_POINTER_SHIFT];
#endif
  double *data;
#if F90_1D_POINTER_SIZE - 1 - F90_1D_POINTER_SHIFT > 0
  void *info[F90_1D_POINTER_SIZE - 1 - F90_1D_POINTER_SHIFT];
#endif
};
typedef struct _f90_pointer_double_2D f90_pointer_double_2D;
struct _f90_pointer_double_2D
{
#if F90_2D_POINTER_SHIFT > 0
  void *shift[F90_2D_POINTER_SHIFT];
#endif
  double *data;
#if F90_2D_POINTER_SIZE - 1 - F90_2D_POINTER_SHIFT > 0
  void *info[F90_2D_POINTER_SIZE - 1 - F90_2D_POINTER_SHIFT];
#endif
};
typedef struct _f90_pointer_double_3D f90_pointer_double_3D;
struct _f90_pointer_double_3D
{
#if F90_3D_POINTER_SHIFT > 0
  void *shift[F90_3D_POINTER_SHIFT];
#endif
  double *data;
#if F90_3D_POINTER_SIZE - 1 - F90_3D_POINTER_SHIFT > 0
  void *info[F90_3D_POINTER_SIZE - 1 - F90_3D_POINTER_SHIFT];
#endif
};
typedef struct _f90_pointer_double_4D f90_pointer_double_4D;
struct _f90_pointer_double_4D
{
#if F90_4D_POINTER_SHIFT > 0
  void *shift[F90_4D_POINTER_SHIFT];
#endif
  double *data;
#if F90_4D_POINTER_SIZE - 1 - F90_4D_POINTER_SHIFT > 0
  void *info[F90_4D_POINTER_SIZE - 1 - F90_4D_POINTER_SHIFT];
#endif
};
typedef struct _f90_pointer_double_5D f90_pointer_double_5D;
struct _f90_pointer_double_5D
{
#if F90_5D_POINTER_SHIFT > 0
  void *shift[F90_5D_POINTER_SHIFT];
#endif
  double *data;
#if F90_5D_POINTER_SIZE - 1 - F90_5D_POINTER_SHIFT > 0
  void *info[F90_5D_POINTER_SIZE - 1 - F90_5D_POINTER_SHIFT];
#endif
};
typedef struct _f90_pointer_int f90_pointer_int;
struct _f90_pointer_int 
{
#if F90_1D_POINTER_SHIFT > 0
  void *shift[F90_1D_POINTER_SHIFT];
#endif
  int *data;
#if F90_1D_POINTER_SIZE - 1 - F90_1D_POINTER_SHIFT > 0
  void *info[F90_1D_POINTER_SIZE - 1 - F90_1D_POINTER_SHIFT];
#endif
};
typedef struct _f90_pointer_int_2D f90_pointer_int_2D;
struct _f90_pointer_int_2D
{
#if F90_2D_POINTER_SHIFT > 0
  void *shift[F90_2D_POINTER_SHIFT];
#endif
  int *data;
#if F90_2D_POINTER_SIZE - 1 - F90_2D_POINTER_SHIFT > 0
  void *info[F90_2D_POINTER_SIZE - 1 - F90_2D_POINTER_SHIFT];
#endif
};

#endif
